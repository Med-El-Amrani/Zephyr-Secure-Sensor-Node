# Power Management Configuration Fragment
# Include this in your build with: west build -- -DEXTRA_CONF_FILE=conf/power.conf

# Power management
CONFIG_PM=y
CONFIG_PM_DEVICE=y
CONFIG_PM_DEVICE_RUNTIME=y
CONFIG_PM_POLICY_DEFAULT=y

# Low power states
CONFIG_PM_STATE_SLEEP_1=y
CONFIG_PM_STATE_SLEEP_2=y

# Tickless kernel
CONFIG_TICKLESS_KERNEL=y
CONFIG_TICKLESS_IDLE=y

# Idle power optimization
CONFIG_PM_DEVICE_RUNTIME_EXCLUSIVE=y

# Reduce clock speed (example - adjust for your needs)
# CONFIG_SYS_CLOCK_HW_CYCLES_PER_SEC=160000000  # 160MHz for ESP32-S3

# Watchdog
CONFIG_WATCHDOG=y
CONFIG_WDT_DISABLE_AT_BOOT=n

# Device power management
CONFIG_PM_DEVICE_POWER_DOMAIN=y
CONFIG_PM_DEVICE_POWER_DOMAIN_DYNAMIC=y